<div class="text_input_section" [ngClass]="{'invalid':(FormControl.touched && FormControl.invalid)}">
  <div class="text_input">
    <mat-label class="input_label">{{ label }}</mat-label>

    <mat-form-field appearance="outline" class="text_mat_form_field">
      <input
        matInput
        [formControl]="FormControl"
        [type]="type"
        [placeholder]="placeholder ?? ''"
        class="text_input_field"
      />

      <!-- Only the first matching error will be shown -->
      <mat-error *ngIf="FormControl.hasError('required') && (FormControl.dirty || FormControl.touched)">
        {{ label }} is required
      </mat-error>

      <mat-error *ngIf="FormControl.hasError('email') && !FormControl.hasError('required') && (FormControl.dirty || FormControl.touched)">
        Please enter a valid email address
      </mat-error>

      <mat-error *ngIf="FormControl.hasError('minlength') && !FormControl.hasError('required') && !FormControl.hasError('email') && (FormControl.dirty || FormControl.touched)">
        Minimum length is {{ FormControl.getError('minlength')?.requiredLength }}
      </mat-error>

      <mat-error *ngIf="FormControl.hasError('maxlength') && !FormControl.hasError('required') && !FormControl.hasError('email') && !FormControl.hasError('minlength') && (FormControl.dirty || FormControl.touched)">
        Maximum length is {{ FormControl.getError('maxlength')?.requiredLength }}
      </mat-error>

      <mat-error *ngIf="FormControl.invalid && (FormControl.dirty || FormControl.touched) &&
        !FormControl.hasError('required') &&
        !FormControl.hasError('email') &&
        !FormControl.hasError('minlength') &&
        !FormControl.hasError('maxlength')">
        Invalid input
      </mat-error>
    </mat-form-field>
  </div>
</div>
